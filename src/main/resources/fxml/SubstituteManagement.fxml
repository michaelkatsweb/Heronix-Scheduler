<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.eduscheduler.ui.controller.SubstituteManagementUIController"
      spacing="15" style="-fx-background-color: #f5f5f5; -fx-padding: 20;">

    <!-- Title Section -->
    <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
        <Label text="ðŸ‘¥" style="-fx-font-size: 24;"/>
        <VBox spacing="2" HBox.hgrow="ALWAYS">
            <Label text="Substitute Management" style="-fx-font-size: 20; -fx-font-weight: bold;"/>
            <Label text="Manage substitutes and their assignments" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
        </VBox>
        <Button text="+ New Assignment" onAction="#handleNewAssignment"
               style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-padding: 10 20; -fx-cursor: hand; -fx-font-weight: bold;"/>
        <Button text="ðŸ“¥ Substitute Data Import" onAction="#handleImportFrontline"
               style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-padding: 10 20; -fx-cursor: hand;"/>
    </HBox>

    <!-- Tab Pane -->
    <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">

        <!-- Assignments Tab -->
        <Tab text="ðŸ“… Assignments">
            <VBox spacing="15" style="-fx-padding: 15;">

                <!-- Filters -->
                <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 8;">
                    <Label text="Filter:" style="-fx-font-weight: 500;"/>

                    <VBox spacing="2">
                        <Label text="Date Range" style="-fx-font-size: 10; -fx-text-fill: #999;"/>
                        <DatePicker fx:id="filterStartDatePicker" promptText="Start date" style="-fx-pref-width: 130;"/>
                    </VBox>

                    <Label text="to" style="-fx-padding: 0 5;"/>

                    <VBox spacing="2">
                        <Label text=" " style="-fx-font-size: 10;"/>
                        <DatePicker fx:id="filterEndDatePicker" promptText="End date" style="-fx-pref-width: 130;"/>
                    </VBox>

                    <VBox spacing="2">
                        <Label text="Status" style="-fx-font-size: 10; -fx-text-fill: #999;"/>
                        <ComboBox fx:id="filterStatusComboBox" promptText="All statuses" style="-fx-pref-width: 150;"/>
                    </VBox>

                    <VBox spacing="2">
                        <Label text="Substitute" style="-fx-font-size: 10; -fx-text-fill: #999;"/>
                        <ComboBox fx:id="filterSubstituteComboBox" promptText="All substitutes" style="-fx-pref-width: 180;"/>
                    </VBox>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Button text="ðŸ” Search" onAction="#handleSearchAssignments"
                           style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-padding: 8 16; -fx-cursor: hand;"/>
                    <Button text="Clear" onAction="#handleClearFilters"
                           style="-fx-background-color: #9E9E9E; -fx-text-fill: white; -fx-padding: 8 16; -fx-cursor: hand;"/>
                </HBox>

                <!-- Assignments Table -->
                <VBox VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 8;">
                    <TableView fx:id="assignmentsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="assignmentDateColumn" text="Date" prefWidth="100"/>
                            <TableColumn fx:id="assignmentSubstituteColumn" text="Substitute" prefWidth="150"/>
                            <TableColumn fx:id="assignmentTimeColumn" text="Time" prefWidth="120"/>
                            <TableColumn fx:id="assignmentDurationColumn" text="Duration" prefWidth="100"/>
                            <TableColumn fx:id="assignmentReplacedStaffColumn" text="Replaced Staff" prefWidth="150"/>
                            <TableColumn fx:id="assignmentReasonColumn" text="Reason" prefWidth="130"/>
                            <TableColumn fx:id="assignmentRoomColumn" text="Room" prefWidth="80"/>
                            <TableColumn fx:id="assignmentStatusColumn" text="Status" prefWidth="100"/>
                            <TableColumn fx:id="assignmentActionsColumn" text="Actions" prefWidth="120"/>
                        </columns>
                        <placeholder>
                            <Label text="No assignments found. Click '+ New Assignment' to create one." style="-fx-text-fill: #999;"/>
                        </placeholder>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
                        <Label fx:id="assignmentCountLabel" text="Total: 0 assignments" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#handleRefreshAssignments"
                               style="-fx-background-color: #757575; -fx-text-fill: white; -fx-padding: 6 12; -fx-cursor: hand;"/>
                    </HBox>
                </VBox>

            </VBox>
        </Tab>

        <!-- Substitutes Tab -->
        <Tab text="ðŸ‘¤ Substitutes">
            <VBox spacing="15" style="-fx-padding: 15;">

                <!-- Substitute Actions -->
                <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 8;">
                    <TextField fx:id="substituteSearchField" promptText="Search by name or employee ID..."
                              HBox.hgrow="ALWAYS" style="-fx-padding: 8;"/>
                    <Button text="ðŸ” Search" onAction="#handleSearchSubstitutes"
                           style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-padding: 8 16; -fx-cursor: hand;"/>
                    <Button text="+ Add Substitute" onAction="#handleAddSubstitute"
                           style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-padding: 8 16; -fx-cursor: hand;"/>
                </HBox>

                <!-- Substitutes Table -->
                <VBox VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 8;">
                    <TableView fx:id="substitutesTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="subNameColumn" text="Name" prefWidth="150"/>
                            <TableColumn fx:id="subEmployeeIdColumn" text="Employee ID" prefWidth="120"/>
                            <TableColumn fx:id="subTypeColumn" text="Type" prefWidth="130"/>
                            <TableColumn fx:id="subEmailColumn" text="Email" prefWidth="180"/>
                            <TableColumn fx:id="subPhoneColumn" text="Phone" prefWidth="120"/>
                            <TableColumn fx:id="subCertificationsColumn" text="Certifications" prefWidth="150"/>
                            <TableColumn fx:id="subStatusColumn" text="Status" prefWidth="80"/>
                            <TableColumn fx:id="subActionsColumn" text="Actions" prefWidth="120"/>
                        </columns>
                        <placeholder>
                            <Label text="No substitutes found. Click '+ Add Substitute' to add one." style="-fx-text-fill: #999;"/>
                        </placeholder>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
                        <Label fx:id="substituteCountLabel" text="Total: 0 substitutes" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#handleRefreshSubstitutes"
                               style="-fx-background-color: #757575; -fx-text-fill: white; -fx-padding: 6 12; -fx-cursor: hand;"/>
                    </HBox>
                </VBox>

            </VBox>
        </Tab>

        <!-- Calendar Tab -->
        <Tab text="ðŸ“† Calendar View">
            <VBox spacing="15" style="-fx-padding: 15;" alignment="CENTER">
                <Label text="ðŸ“†" style="-fx-font-size: 48;"/>
                <Label text="Calendar View" style="-fx-font-size: 20; -fx-font-weight: bold;"/>
                <Label text="Coming soon! View all substitute assignments in a calendar format."
                      style="-fx-font-size: 14; -fx-text-fill: #666;" wrapText="true" textAlignment="CENTER"/>
            </VBox>
        </Tab>

        <!-- Reports Tab -->
        <Tab text="ðŸ“Š Reports">
            <VBox spacing="15" style="-fx-padding: 15;">

                <!-- Report Options -->
                <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                    <Label text="Generate Reports" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

                    <HBox spacing="15">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Report Type" style="-fx-font-size: 12; -fx-font-weight: 500;"/>
                            <ComboBox fx:id="reportTypeComboBox" promptText="Select report type..."
                                     HBox.hgrow="ALWAYS" maxWidth="Infinity" style="-fx-padding: 8;"/>
                        </VBox>
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Date Range" style="-fx-font-size: 12; -fx-font-weight: 500;"/>
                            <HBox spacing="5">
                                <DatePicker fx:id="reportStartDatePicker" promptText="Start" HBox.hgrow="ALWAYS"/>
                                <Label text="to" style="-fx-padding: 8 0;"/>
                                <DatePicker fx:id="reportEndDatePicker" promptText="End" HBox.hgrow="ALWAYS"/>
                            </HBox>
                        </VBox>
                    </HBox>

                    <Button text="ðŸ“„ Generate Report" onAction="#handleGenerateReport"
                           style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-padding: 10 20; -fx-cursor: hand;"/>
                </VBox>

                <!-- Statistics Cards -->
                <GridPane hgap="15" vgap="15">
                    <!-- Card 1 -->
                    <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="0"
                         style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-min-width: 200;">
                        <Label text="ðŸ“… This Week" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                        <Label fx:id="statsThisWeekLabel" text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
                        <Label text="Assignments" style="-fx-font-size: 11; -fx-text-fill: #999;"/>
                    </VBox>

                    <!-- Card 2 -->
                    <VBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="0"
                         style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-min-width: 200;">
                        <Label text="ðŸ“† This Month" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                        <Label fx:id="statsThisMonthLabel" text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #4CAF50;"/>
                        <Label text="Assignments" style="-fx-font-size: 11; -fx-text-fill: #999;"/>
                    </VBox>

                    <!-- Card 3 -->
                    <VBox spacing="5" GridPane.columnIndex="2" GridPane.rowIndex="0"
                         style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-min-width: 200;">
                        <Label text="ðŸ‘¥ Active Substitutes" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                        <Label fx:id="statsActiveSubsLabel" text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #9C27B0;"/>
                        <Label text="Available" style="-fx-font-size: 11; -fx-text-fill: #999;"/>
                    </VBox>

                    <!-- Card 4 -->
                    <VBox spacing="5" GridPane.columnIndex="3" GridPane.rowIndex="0"
                         style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-min-width: 200;">
                        <Label text="ðŸ’° Total Hours" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                        <Label fx:id="statsTotalHoursLabel" text="0.0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #FF9800;"/>
                        <Label text="This Month" style="-fx-font-size: 11; -fx-text-fill: #999;"/>
                    </VBox>
                </GridPane>

            </VBox>
        </Tab>

    </TabPane>

</VBox>
